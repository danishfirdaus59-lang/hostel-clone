<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta http-equiv="refresh" content="0; URL=Hostel_pass.html"/></head><body>Redirecting to <a href="Hostel_pass.html">Hostel_pass.html</a>
<!-- Assistant: home-icon click fixer -->
<script>
(function(){
  function tryAttach(){
    var targetHref = 'Home_StudentDashboard.html';
    // candidate selectors that might represent the home icon anchor or button
    var selectors = [
      'a#home', 'a#homeBtn', 'a#aHome', 'a[aria-label*="Home"]', 'a[title*="Home"]',
      'a[href*="Home"]', 'a .home-icon', '.home-icon a', '.home', '.icon-home', '.nav-home a'
    ];
    // Also try to find an <svg> or <img> that looks like home and attach to its parent anchor
    var svgCandidates = Array.from(document.querySelectorAll('svg, img')).filter(function(el){
      var cls = (el.className && el.className.baseVal) || (el.className || '');
      return /home|house|house-icon|icon-home/i.test(cls) || /home/i.test(el.getAttribute('aria-label')||'') || /home/i.test(el.getAttribute('title')||'');
    });
    // try selectors first
    for(var sel of selectors){
      var el = document.querySelector(sel);
      if(el){
        // if selector matches inner element, get anchor parent
        var anchor = el.tagName.toLowerCase()==='a' ? el : el.closest('a');
        if(anchor){
          anchor.setAttribute('href', targetHref);
          anchor.addEventListener('click', function(e){ /* let browser follow link */ });
          return true;
        }
      }
    }
    // try anchors that contain a small svg path that looks like house (path with d containing 'M' etc) - simpler: anchors with small dimensions near top
    var anchors = Array.from(document.querySelectorAll('a'));
    for(var a of anchors){
      var inner = a.innerText || '';
      if(/home|dashboard/i.test(inner) && !a.getAttribute('href')){
        a.setAttribute('href', targetHref);
        return true;
      }
      // if anchor contains an svg element with small viewBox, assume it's the home icon
      var svg = a.querySelector('svg');
      if(svg){
        a.setAttribute('href', targetHref);
        return true;
      }
      var img = a.querySelector('img');
      if(img && /home|house/i.test(img.alt||'')){
        a.setAttribute('href', targetHref);
        return true;
      }
    }
    // fallback: attach a delegated click to document to detect clicks on elements that look like home icon
    document.addEventListener('click', function(ev){
      var el = ev.target;
      for(var i=0;i<6 && el;i++){ // climb up few levels
        if(el.tagName && el.tagName.toLowerCase()==='a' && (el.getAttribute('href')||'').trim()!='') return;
        var cls = el.className && (el.className.baseVal||el.className) || '';
        if(/home|house|icon-home|home-icon|nav-home/i.test(cls)){
          ev.preventDefault();
          window.location.href = targetHref;
          return;
        }
        el = el.parentElement;
      }
    }, true);
    return false;
  }

  if(document.readyState==='loading'){
    document.addEventListener('DOMContentLoaded', tryAttach);
  } else tryAttach();
})();
</script>
<!-- End assistant home-icon click fixer -->


// Assistant: stronger navigation handlers for Hostel Leave and My Profile
(function(){
  function safeNavigate(url, sidebar){
    try{
      // Close the sidebar immediately for UX
      if(sidebar && sidebar.classList) sidebar.classList.remove('open');
      // Use location.assign to navigate; add a cache-buster if same page to force reload
      if(window.location.pathname.split('/').pop() === url){
        // same filename -> force reload by adding query param
        window.location.href = url + '?t=' + Date.now();
      } else {
        window.location.href = url;
      }
    }catch(e){
      window.location.href = url;
    }
  }

  function attachHandlers(sidebar){
    if(!sidebar) return;
    var anchors = Array.from(sidebar.querySelectorAll('a'));
    anchors.forEach(function(a){
      try{
        var txt = (a.textContent||'').trim();
        if(/hostel\s*leave/i.test(txt)){
          // make anchor point to Hostel_pass.html and attach click handler to force navigation
          a.setAttribute('href','Hostel_pass.html');
          a.addEventListener('click', function(ev){
            ev.preventDefault();
            safeNavigate('Hostel_pass.html', sidebar);
          });
        }
        if(/my\s*profile/i.test(txt) || (/profile/i.test(txt) && !/hostel/i.test(txt))){
          a.setAttribute('href','CUIMS_Profile.html');
          a.addEventListener('click', function(ev){
            ev.preventDefault();
            safeNavigate('CUIMS_Profile.html', sidebar);
          });
        }
      }catch(e){}
    });
  }

  // Try to find sidebar and attach; if not present, do nothing (existing injection logic handles adding sidebar)
  document.addEventListener('DOMContentLoaded', function(){
    var sidebar = document.querySelector('.uims-sidebar')||document.querySelector('#sidebar')||document.querySelector('.sidebar')||document.querySelector('aside[role="navigation"]');
    attachHandlers(sidebar);
    // Also observe DOM for sidebar insertion (in case it's injected later)
    var observer = new MutationObserver(function(mutations){
      var sb = document.querySelector('.uims-sidebar')||document.querySelector('#sidebar')||document.querySelector('.sidebar')||document.querySelector('aside[role="navigation"]');
      if(sb){
        attachHandlers(sb);
        observer.disconnect();
      }
    });
    observer.observe(document.documentElement || document.body, {childList:true, subtree:true});
  });
})();

<!-- Assistant: global delegated navigation handler -->
<script>
(function(){
  const HOME = 'Home_StudentDashboard.html';
  const HOSTEL = 'Hostel_pass.html';
  const PROFILE = 'CUIMS_Profile.html';

  function textMatches(el, rx){
    try{
      const txt = (el.textContent || el.innerText || '').trim();
      return rx.test(txt);
    }catch(e){ return false; }
  }

  // Try to identify if element is home icon (svg/img) or anchor with home text
  function isHomeEl(el){
    if(!el) return false;
    if(el.tagName && el.tagName.toLowerCase() === 'a' && (el.href && el.getAttribute('href') && el.getAttribute('href').toLowerCase().includes('home')) ) return true;
    if(textMatches(el, /home|dashboard/i)) return true;
    const aria = (el.getAttribute && (el.getAttribute('aria-label')||el.getAttribute('title')||''));
    if(aria && /home/i.test(aria)) return true;
    // svg or img heuristics
    if(el.tagName && (el.tagName.toLowerCase()==='svg' || el.tagName.toLowerCase()==='img')){
      const cls = (el.className && (el.className.baseVal || el.className)) || '';
      if(/home|house|icon-home/i.test(cls)) return true;
      const alt = el.getAttribute && (el.getAttribute('alt')||'');
      if(alt && /home|house/i.test(alt)) return true;
    }
    return false;
  }

  function findAncestor(el, depth){
    let curr = el;
    for(let i=0;i<depth && curr;i++){
      if(curr.tagName && curr.tagName.toLowerCase()==='a') return curr;
      curr = curr.parentElement;
    }
    return null;
  }

  // Global click handler (capture phase) to intercept clicks that should navigate
  document.addEventListener('click', function(ev){
    try{
      const el = ev.target;
      // climb up to 5 levels and examine
      let node = el;
      for(let i=0;i<6 && node;i++){
        // If it's an anchor with href set and not '#', let it proceed normally
        if(node.tagName && node.tagName.toLowerCase()==='a'){
          const href = node.getAttribute('href')||'';
          if(href && href.trim() && !href.trim().startsWith('#') && !href.trim().startsWith('javascript')){
            // allow normal behavior, but still handle if text matches our targets
            const txt = (node.textContent||'').trim();
            if(/hostel\s*leave/i.test(txt)){
              ev.preventDefault();
              window.location.href = HOSTEL;
              return;
            }
            if(/my\s*profile/i.test(txt) || (/profile/i.test(txt) && !/hostel/i.test(txt))){
              ev.preventDefault();
              window.location.href = PROFILE;
              return;
            }
            if(isHomeEl(node) || /home|dashboard/i.test(txt)){
              ev.preventDefault();
              window.location.href = HOME;
              return;
            }
            return; // anchor with proper href and not target word -> allow
          }
        }
        // If element text matches Hostel Leave
        if(textMatches(node, /hostel\s*leave/i)){
          ev.preventDefault();
          window.location.href = HOSTEL;
          return;
        }
        if(textMatches(node, /my\s*profile/i) || (textMatches(node,/profile/i) && !textMatches(node,/hostel/i))){
          ev.preventDefault();
          window.location.href = PROFILE;
          return;
        }
        // Home icon heuristics
        if(isHomeEl(node)){
          ev.preventDefault();
          window.location.href = HOME;
          return;
        }
        node = node.parentElement;
      }
    }catch(e){
      // ignore errors
    }
  }, true); // capture phase to catch early
})();
</script>
<!-- End global delegated navigation handler -->
</body></html>